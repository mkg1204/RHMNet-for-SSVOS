
MODEL:
  TYPE: TRANSFORMER
  HIDDEN_DIM: 256
  BG_PROTOTYPE: True
  WITH_REFINE: False
  REFINE_LAYERS: 1
  OBJECT_THRESHOLD: 0.95
  BACKBONE: 
    NAME: resnet50
    VERSION: v1
    FROZEN: False
    BN_FROZEN: True
  ATTACH:
    USE_SIMILARITY: True
    LOCAL_SIMILARITY: False
  TRANSFORMER:
    DIM_FEEDFORWARD: 1024
    REFINE_THRESHOLD: [0.65, 0.95]
  DECODER:
    UPSAMPLE_LOGITS: True
    PRED_EDGE: False
  SCRIBBLE_PREDICTOR:
    OUT_DIM: 1

DATASETS:
  MEMORY_BG: True
  MINIMUM_AREA: 100
  ERODE: False
  MAX_OBJECT_NUM: 3
  DILATE_KERNEL_SIZE: 8
  CROP_SIZE: [384, 384]
  DILATE_KERNEL_SIZE: 35
  COCOS:
    ANNO_DIR: '/datasets/COCO/scribbles'
    JSON_PATH: '/datasets/COCO/COCO_scribbles.json'
    RANDOM_FLIP: false
    TRANSFORM_MODE: perspective
    AFFINE_RANGE: [6,8,8]
    CLIP_LENGTH: 3
    ADDITIONAL_BG: True

TRAIN:
  BATCH_SIZE: 4
  MODE: clip
  OPTIMIZER: AdamW
  EPOCH: 18
  LR: !!float 5e-5
  BACKBONE_MULTIPLIER: 0.5
  LOSS:
    MASK:
      WEIGHT: 1.0
      BG_WEIGHT: 1.0
    SMOOTH:
      ALPHA: 10.0
      WEIGHT: 0.3
    SCRIBBLE_LOSS:
      USE_FOCAL_LOSS: True
      ALPHA: 0.35
      WEIGHT: 1.0

TEST:
  REQUIRE_LAST: False
  REQUIRE_LAST_SCRIBBLE: True
  MAX_MEMORY_LENGTH: 20
  UPDATE_FREQUENCY: 6
  SCRIBBLE_UPDATE_FREQUENCY: 2